---
title: 2.3 네트워크 기기
---
# 네트워크 기기의 처리 범위
네트워크 기기는 계층별로 처리 범위를 나눌 수 있다.<br>
상위 계층을 처리하는 기기는 하위 계층을 처리할 수 있지만 하위 계층을 처리하는 기기는 상위 계층을 처리할 수 없다.
* 애플리케이션 계층 : L7 스위치
* 인터넷 계층 : 라우터, L3 스위치
* 데이터 링크 계층 : L2 스위치, 브리지
* 물리 계층 : NIC, 리피터, AP

* 스위치
  여러 장비를 연결하고 데이터 통신을 중재해 목적지가 연결된 포트로만 전기 신호를 보내 전송하는 통신 네트워크 장비.

## 애플리케이션 계층을 처리하는 기기
### L7 스위치
로드밸런서라고도 하며, 애플리케이션 서버와 방문자 또는 클라이언트 간의 인터넷 트래픽을 지시하고 제어한다. 결과적으로 애플리케이션의 가용성, 확장성, 보안 및 성능이 향상된다.<br>
**애플리케이션 가용성**<br>
서버 장애 또는 유지 관리로 인해 애플리케이션 가동 중지 시간이 늘어 방문자가 애플리케이션을 사용할 수 없게 되는 경우가 있다.<br>
서버 문제를 자동으로 감지, 클라이언트 트래픽을 사용 가능한 리디렉션하여 시스템의 내결함성을 높인다.
* 애플리케이션 가동 중지 없이 애플리케이션 서버 유지 관리 또는 업그레이드 실행
* 백업 사이트에 자동 재해 복구 제공
* 상태 확인을 수행하고 가동 중지를 유발할 수 있는 문제 방지<br>

**애플리케이션 확장성**<br>
여러 서버 간에 네트워크 트래픽을 지능적으로 전달할 수 있다.
* 한 서버에서 트래픽 병목 현상 방지
* 필요한 경우 다른 서버를 추가/제거 가능하도록 애플리케이션 트래픽을 예측
* 안심하고 조정할 수 있도록 시스템에 중복성을 추가

**애플리케이션 보안**<br>
인터넷 애플리케이션에 또 다른 보안 계층을 추가할 수 있는 보안 기능이 내장되어 있다. 
 * 트래픽 모니터링 및 악성 콘텐츠 차단
 * 공격 트래픽을 여러 백엔드 서버로 자동으로 리디렉션하여 영향 최소화
 * 추가 보안을 위해 네트워크 방화벽 그룹을 통해 트래픽 라우팅

**애플리케이션 성능**<br>
응답 시간을 늘리고 네트워크 지연 시간을 줄여 애플리케이션 성능을 향상시킨다.
 * 서버 간에 로드를 균등하게 배포하여 애플리케이션 성능 향상
 * 클라이언트 요청을 지리적으로 더 가까운 서버로 리디렉션하여 지연 시간 단축
 * 물리적 및 가상 컴퓨팅 리소스의 신뢰성 및 성능 보장

**로드 밸런싱의 작동 방식**<br>
회사는 일반적으로 여러 서버에서 애플리케이션을 실행하는데, 이러한 서버 배열을 <u>서버 팜</u>이라고 한다.<br>
로드 밸런서는 요청을 처리하는 데 가장 적합한 서버 팜의 단일 서버로 각 요청을 라우팅한다.<br>
**로드 밸런싱의 유형**
1. L7 Load Balancing<br>
    애플리케이션 계층에서 로드를 분산한다.<br>
    OSI 7계층의 프로토콜(HTTP, SMTP, FTP 등)을 바탕으로도 분산 처리가 가능하다.
    ALB(Application Load Balancer): HTTP 기반 요청에 대한 트래픽을 라우팅
2. L4 Load Balancing<br>
    전송 계층에서 로드를 분산한다.
    IP주소나 포트번호, MAC주소 등에 따라 트래픽을 나누고 분산처리가 가능하다.
    CLB(Connection Load Balancer) 혹은 SLB(Session Load Balancer)라고 부르기도 한다.
    NLB(Network Load Balancer): IP 주소를 기반으로 트래픽을 라우팅. CP와 UDP(User Datagram Protocol) 기반 요청의 균형을 맞추는 데 이상적임.<br>

**L4 스위치와 L7 스위치 차이**<br>
L4가 단지 부하를 분산시키는 것이라면, L7은 요청의 세부적인 사항을 두고 여러개의 서버로 분리해 가볍고 작은 단위로 여러 개의 서비스를 운영하고 요청을 각각의 서버에 분산할 수 있는 것이다.
**헬스 체크**
L4 스위치 또는 L7 스위치 모두 헬스 체크를 통해 정상적인 서버 또는 비정상적인 서버를 판별하는데, 헬스 체크는 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보내는 것을 말한다.<br>
서버에 부하가 되지 않을 만큼 요청 횟수가 적절해야 하고, TCP HTTP 등 다양한 방법으로 요청을 보내며 요청이 정상적으로 이루어졌다면 정상적인 서버로 판별.<br>
서버의 상태를 주기적으로 점검하는 방법으로는 Link, ARP, ICMP, TCP, Script 방식이 있으며, 일정 시간 간격으로 서비스에 대하여 Open과 Close를 반복적으로 진행하여 서비스 제공 가능 유무를 점검한다.<br>

**로드밸런서를 이용한 서버 이중화**
로드밸런서는 대표적인 기능으로 서버 이중화를 들 수 있다. <br>
서비스를 안정적으로 운용하기 위해서는 2대 이상의 서버가 필수적이기 때문이다.<br>
로드 밸런서는 2대 이상의 서버를 기반으로 가상 IP를 제공하고 이를 기반으로 안정적인 서비스를 제공한다.<br>

## 인터넷 계층을 처리하는 기기
### 라우터
라우터는 여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할을 하며 "다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을 때 패킷 소모를 최소화하고 경로를 최적화하여 최소 경로로 패킷을 포워딩" 하는 라우팅을 하는 장비이다.

### L3 스위치
L3 스위치란 L2 스위치의 기능과 라우팅 기능을 갖춘 장비를 말한다.<br>
L3 스위치를 라우터라고 해도 무방하다.<br>
라우터는 소프트웨어 기반의 라우팅과 하드웨어 기반의 라우팅을 하는 것으로 나눠지고 하드웨어 기반의 라우팅을 담당하는 장비를 L3 스위치라고한다.

* 기본 동작 방식
  기본적으로 서로 다른 
## 데이터 링크 계층을 처리하는 기기

### L2 스위치
데이터 링크 계층을 처리하는 기기로는 L2 스위치와 브리지가 있다.

L2 스위치는 장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리하며,
연결된 장치로부터 패킷이 왔을 때 패킷 전송을 담당한다.


IP 주소를 이해하지 못해 IP 주소를 기반으로 라우팅을 불가능하며 단순한 패킷의 MAC 주소를 읽어 스위칭하는 역할을 한다.

만약 목적지가 MAC 주소 테이블에 없다면 전체 포트에 전달하고 MAC 주소 테이블을 일정 시간 뒤 삭제하는 기능도 있다.
**브리지**
브리지는 두 개의 근거리 통신망(LAN)을 상호 접속할 수 있도록 하는 통신망 연결 장치로,
포트와 포트 사이의 다리 역할을 하며 장치에서 받아온 MAC 주소를 MAC 주소 테이블로 관리한다.
## 물리 계층을 처리하는 기기

### NIC
LAN 카드라고 하는 네트워크 인터페이스 카드는 2대 이상의 컴퓨터 네트워크를 구성하는 데 사용하며,
네트워크와 빠른 속도로 데이터를 송수신할 수 있도록 컴퓨터 내에 설치하는 확장 카드이다.
### 리피터
리피터는 들어오는 약해진 신호 정도를 증폭하여 다른 쪽으로 전달하는 장치를 말한다.
이를 통해 패킷을 더 멀리 보낼 수 있다. 하지만 광케이블이 도입되며 현재는 잘 쓰이지 않는다.
### AP
AP는 패킷을 복사하는 기기이다.
AP에 LAN을 연결한 후 다른 장치에서 무선 LAN 기술을 사용하여 무선 네트워크 연결을 할 수 있다.
> 참고
> https://aws.amazon.com/ko/what-is/load-balancing/<br>
> https://velog.io/@yanghl98/OS%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1-Load-Balancing-%EC%A0%95%EC%9D%98-%EC%A2%85%EB%A5%98-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98<br>
> https://jaehoney.tistory.com/73<br>